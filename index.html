<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>EcuaciÃ³n Interactiva</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f4f4f4; }

    .ecuacion {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .lado {
      display: flex;
      gap: 10px;
      min-width: 150px;
      min-height: 50px;
      padding: 10px;
      background: #ffffff;
      border: 2px dashed #ccc;
      border-radius: 10px;
    }

    .bloque {
      padding: 10px 15px;
      background-color: #d1eaff;
      border: 2px solid #007acc;
      border-radius: 5px;
      cursor: grab;
      font-weight: bold;
    }

    .igual {
      font-size: 28px;
      font-weight: bold;
      margin: 0 10px;
      user-select: none;
    }

    .fraccion {
      display: flex;
      flex-direction: column;
      align-items: center;
      border: none;
      position: relative;
    }

    .linea-fraccion {
      width: 100%;
      height: 2px;
      background-color: black;
      margin: 4px 0;
    }

    h2 {
      text-align: center;
    }

    .botones {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 20px;
    }

    button {
      padding: 10px 15px;
      font-size: 14px;
      cursor: pointer;
    }

    .btn-x {
      position: absolute;
      top: -10px;
      right: -10px;
      background: red;
      color: white;
      border: none;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h2>ðŸ”€ Mueve, edita, elimina o arma tus ecuaciones</h2>

  <div class="botones">
    <button onclick="agregarSeccion()">âž• Agregar secciÃ³n</button>
    <button onclick="agregarBloque('numerador')">âž• Numerador</button>
    <button onclick="agregarBloque('denominador')">âž• Denominador</button>
    <button onclick="agregarFraccion()">âž• Agregar divisiÃ³n</button>
    <button onclick="agregarIgual()">âž• Agregar igualdad</button>
  </div>

  <div class="ecuacion" id="contenedorEcuacion">
    <div class="lado" id="lado-izquierdo" ondrop="soltar(event)" ondragover="permitirSoltar(event)" style="position: relative;">
  <button class="btn-x" onclick="eliminar(this.parentElement)">Ã—</button>
      <div class="bloque" draggable="true" ondragstart="arrastrar(event)" ondblclick="editar(this)" oncontextmenu="eliminar(this, event)">+ 2x</div>
      <div class="bloque" draggable="true" ondragstart="arrastrar(event)" ondblclick="editar(this)" oncontextmenu="eliminar(this, event)">+ 5</div>
    </div>

    <div class="igual" onclick="eliminar(this)">=</div>

    <div class="fraccion">
      <button class="btn-x" onclick="eliminar(this.parentElement)">Ã—</button>
      <div class="lado" id="numerador" ondrop="soltar(event)" ondragover="permitirSoltar(event)">
        <div class="bloque" draggable="true" ondragstart="arrastrar(event)" ondblclick="editar(this)" oncontextmenu="eliminar(this, event)">8</div>
      </div>
      <div class="linea-fraccion"></div>
      <div class="lado" id="denominador" ondrop="soltar(event)" ondragover="permitirSoltar(event)">
        <div class="bloque" draggable="true" ondragstart="arrastrar(event)" ondblclick="editar(this)" oncontextmenu="eliminar(this, event)">1</div>
        <div class="bloque" draggable="true" ondragstart="arrastrar(event)" ondblclick="editar(this)" oncontextmenu="eliminar(this, event)">+ 2</div>
        <div class="bloque" draggable="true" ondragstart="arrastrar(event)" ondblclick="editar(this)" oncontextmenu="eliminar(this, event)">+ 3</div>
      </div>
    </div>

    <div class="igual" onclick="eliminar(this)">=</div>

    <div class="lado" id="lado-derecho" ondrop="soltar(event)" ondragover="permitirSoltar(event)" style="position: relative;">
  <button class="btn-x" onclick="eliminar(this.parentElement)">Ã—</button>
      <div class="bloque" draggable="true" ondragstart="arrastrar(event)" ondblclick="editar(this)" oncontextmenu="eliminar(this, event)">+ 9</div>
    </div>
  </div>

  <script>
    let bloqueArrastrado = null;

    function arrastrar(ev) {
      bloqueArrastrado = ev.target;
    }

    function permitirSoltar(ev) {
      ev.preventDefault();
    }

    function soltar(ev) {
      ev.preventDefault();
      if (bloqueArrastrado && ev.target.classList.contains('lado')) {
        ev.target.appendChild(bloqueArrastrado);
      }
    }

    function editar(bloque) {
      const nuevoTexto = prompt("Edita el contenido del bloque:", bloque.textContent);
      if (nuevoTexto !== null && nuevoTexto.trim() !== "") {
        bloque.textContent = nuevoTexto;
      }
    }

   function agregarBloque(ladoId) {
  const lado = document.getElementById(ladoId);
  if (!lado) {
    alert("Esa secciÃ³n ya no existe. Agrega una nueva secciÃ³n primero.");
    return;
  }

  const contenido = prompt("Contenido del nuevo bloque:");
  if (contenido !== null && contenido.trim() !== "") {
    const nuevoBloque = document.createElement("div");
    nuevoBloque.className = "bloque";
    nuevoBloque.draggable = true;
    nuevoBloque.ondragstart = arrastrar;
    nuevoBloque.ondblclick = function () { editar(nuevoBloque); };
    nuevoBloque.oncontextmenu = function (e) { eliminar(nuevoBloque, e); };
    nuevoBloque.textContent = contenido.trim();
    lado.appendChild(nuevoBloque);
  }
}

    function eliminar(elemento, evento = null) {
      if (evento) evento.preventDefault();
      if (confirm("Â¿Eliminar este elemento?")) {
        elemento.remove();
      }
    }

    function agregarFraccion() {
      const contenedor = document.getElementById("contenedorEcuacion");

      const fraccion = document.createElement("div");
      fraccion.className = "fraccion";

      const botonCerrar = document.createElement("button");
      botonCerrar.textContent = "Ã—";
      botonCerrar.className = "btn-x";
      botonCerrar.onclick = function () {
        eliminar(fraccion);
      };

      const numerador = document.createElement("div");
      numerador.className = "lado";
      numerador.ondrop = soltar;
      numerador.ondragover = permitirSoltar;

      const linea = document.createElement("div");
      linea.className = "linea-fraccion";

      const denominador = document.createElement("div");
      denominador.className = "lado";
      denominador.ondrop = soltar;
      denominador.ondragover = permitirSoltar;

      fraccion.appendChild(botonCerrar);
      fraccion.appendChild(numerador);
      fraccion.appendChild(linea);
      fraccion.appendChild(denominador);

      contenedor.appendChild(fraccion);
    }

    function agregarIgual() {
      const igual = document.createElement("div");
      igual.className = "igual";
      igual.textContent = "=";
      igual.onclick = function () {
        if (confirm("Â¿Eliminar este signo de igualdad?")) {
          igual.remove();
        }
      };
      document.getElementById("contenedorEcuacion").appendChild(igual);
    }

    
let contadorSecciones = 0;

function agregarSeccion() {
  const contenedor = document.getElementById("contenedorEcuacion");

  const lado = document.createElement("div");
  lado.className = "lado";
  lado.ondrop = soltar;
  lado.ondragover = permitirSoltar;

  // Asignar un ID Ãºnico para futuras referencias
  const nuevoID = "lado-dinamico-" + contadorSecciones++;
  lado.id = nuevoID;

  // BotÃ³n para eliminar la secciÃ³n
  const botonCerrar = document.createElement("button");
  botonCerrar.textContent = "Ã—";
  botonCerrar.className = "btn-x";
  botonCerrar.onclick = function () {
    eliminar(lado);
  };

  lado.style.position = "relative";
  lado.appendChild(botonCerrar);

  contenedor.appendChild(lado);

  // Preguntar si se desea agregar un bloque de inmediato
  if (confirm("Â¿Quieres agregar un bloque a esta nueva secciÃ³n?")) {
    agregarBloque(nuevoID);
  }
}
    
  </script>
</body>
</html>
